<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/WEB-INF/template/layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <f:metadata>
        <f:viewAction action="#{avaliacaoBean.prepararCadastro}" />
    </f:metadata>
    <ui:define name="titulo">Cadastro de Avaliação</ui:define>
    <ui:define name="corpo">
        <div class="container">
            <h:form>
                <p:messages/>
                <h:panelGrid columns="2">
                    <p:outputLabel value="Código" />
                    <p:inputText id="codigo" size="12" value="#{avaliacaoBean.avaliacao.codigoAvaliacao}" label="Nome"/>

                    <p:outputLabel value="Objetivo" />
                    <p:inputTextarea id="objetico" rows="3" cols="33" value="#{avaliacaoBean.avaliacao.objetivoAvaliacao}"  />

                    <p:outputLabel value="Início" />
                    <p:inputMask id="inicio" value="#{avaliacaoBean.avaliacao.inicioAvaliacao}" mask="99/99/9999 99:99" converter="#{localDateTimeConverter}" />

                    <p:outputLabel value="Término" />
                    <p:inputMask id="fim" value="#{avaliacaoBean.avaliacao.terminoAvaliacao}" mask="99/99/9999 99:99" converter="#{localDateTimeConverter}" />

                    <p:outputLabel value="Turma" />
                    <p:selectOneListbox id="turma" value="#{avaliacaoBean.avaliacao.turma}" filter="true" filterMatchMode="contains" converter="#{turmaConverter}">
                        <f:selectItems
                            value="#{avaliacaoBean.todasTurmas}"
                            var="turma"
                            itemValue="#{turma}"
                            itemLabel="#{turma.id} - Turma"/>
                    </p:selectOneListbox>

                    <p:outputLabel value="Email Abertura" />
                    <p:selectOneListbox id="email" value="#{avaliacaoBean.avaliacao.emailAbertura}" filter="true" filterMatchMode="contains" converter="#{emailAberturaConverter}">
                        <f:selectItems
                            value="#{avaliacaoBean.todosEmails}"
                            var="email"
                            itemValue="#{email}"
                            itemLabel="#{email.id} - Email"/>
                    </p:selectOneListbox>
                    
                    <p:outputLabel value="Questionário" />
                    <p:selectOneListbox id="questionario" value="#{avaliacaoBean.avaliacao.questionario}" filter="true" filterMatchMode="contains" converter="#{questionarioConverter}">
                        <f:selectItems
                            value="#{avaliacaoBean.todosQuestionarios}"
                            var="questionario"
                            itemValue="#{questionario}"
                            itemLabel="#{questionario.id} - Questionário"/>
                    </p:selectOneListbox>

                    <p:outputLabel value="Observações" />
                    <p:inputTextarea id="observacoes" rows="3" cols="33" value="#{avaliacaoBean.avaliacao.observacoes}"  />

                    <h:commandButton value="Salvar" action="#{avaliacaoBean.salvar()}" />
                </h:panelGrid>
            </h:form>
        </div>
    </ui:define>    
</ui:composition>